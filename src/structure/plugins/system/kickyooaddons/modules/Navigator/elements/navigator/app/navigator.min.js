const modalHistory = {};

let backButton = false;
let modalButton = false;
UIkit.util.$$('.kicknavigator').forEach(function(el) {
  var jsid = el.getAttribute('data-modal');
  modalHistory[jsid] = [];
  UIkit.util.$$('.el-modal', el).forEach(function(modal) {

    UIkit.util.on(modal, 'beforehide', function (ev, event) {
      if (!backButton)
      {
        modalHistory[jsid].push(modal);
      }

      if (!backButton && !modalButton)
      {
        modalHistory[jsid] = [];
      }
      backButton = false;
      modalButton = false;
    });
  });
});

function prevModal() {
  backButton = true;
  var jsid = event.target.getAttribute('data-modal');
  UIkit.modal(modalHistory[jsid].pop()).show();
}

function showModal(element) {
  modalButton = true;
  UIkit.modal(element).show();
}
